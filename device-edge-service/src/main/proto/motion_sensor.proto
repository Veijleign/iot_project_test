syntax = "proto3";

package org.iot_platform.hotel;

option java_package = "org.iot_platform.hotel.protobuf";
option java_multiple_files = true;

import "sensor_common.proto";

message MotionSensorData {
  SensorHeader header = 1;

  bool motion_detected = 2;      // Обнаружено движение
  int32 detection_count = 3;     // Количество срабатываний за период
  float detection_confidence = 4; // Достоверность обнаружения (0-1)

  // Для расширенной аналитики
  repeated MotionEvent events = 5;
  RoomStatus room_status = 6;
}

message MotionEvent {
  int64 event_timestamp = 1;
  MotionType motion_type = 2;
  string zone = 3;  // "entrance", "bed", "bathroom"
}

enum MotionType {
  MOVEMENT_DETECTED = 0;
  MOVEMENT_ENDED = 1;
  OCCUPANCY_START = 2;
  OCCUPANCY_END = 3;
}

enum RoomStatus {
  ROOM_EMPTY = 0;
  ROOM_OCCUPIED = 1;
  ROOM_CLEANING_NEEDED = 2;
}