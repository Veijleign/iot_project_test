syntax = "proto3";

package org.iot_platform.hotel;

option java_multiple_files = true;

import "sensor_common.proto";

message WaterMeterData {
  SensorHeader header = 1;

  // Потребление воды
  double total_consumption_l = 2;    // Суммарное потребление (литры)
  double flow_rate_lpm = 3;          // Текущий расход (л/мин)
  double hourly_consumption_l = 4;   // Потребление за час

  // Анализ использования
  LeakDetection leak_detection = 6;
  WaterQuality quality = 7;
}

message LeakDetection {
  bool possible_leak = 1;
  double leak_rate_lph = 2; // Расход при утечке (л/час)
  string suspected_location = 3;
}

message WaterQuality {
  float temperature_c = 1;
  float ph_level = 2;
  float turbidity = 3; // Мутность
}